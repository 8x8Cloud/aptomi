# Definition of Kafka service
name: kafka

labels:
  set:
    a: b

components:

  - name: component1
    service: zookeeper
    labels:
      set: # add/modify
        some-test-context-specific-label: some-value
      remove:
        a:
        b:

  - name: component2
    discovery:
      url: "kafka-{{ .Discovery.instance }}-url"
    code:
      type: aptomi/code/unittests
      params:
        address: "{{ .Discovery.component1.component2.instance }}"
        queue: " {{ .User.Labels.changinglabel }} "
    labels:
      set: # add/modify
        some-test-context-specific-label: some-value
      remove:
        a:
        b:
    dependencies:
      - component1

  - name: component3
    code:
      type: aptomi/code/unittests
      metadata:
        service: kafka
        component: component3
    labels:
      set: # add/modify
        some-test-context-specific-label: some-value
      remove:
        a:
        b:
    dependencies:
      - component2
