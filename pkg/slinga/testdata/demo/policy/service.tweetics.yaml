# Definition of TweeTics service
name: tweetics

labels:
  set:
    a: b

components:

  - name: kafka
    service: kafka
    labels:
      set: # add/modify
        some-test-context-specific-label: some-value
      remove:
        a:
        b:

  - name: hdfs
    service: hdfs
    labels:
      set: # add/modify
        some-test-context-specific-label: some-value
      remove:
        a:
        b:

  - name: tweetics
    code:
      type: aptomi/code/kubernetes-helm
      content:
        chart:
          name: boston-summit-charts/tweetics
        params:
          kafka.externalAddress: kafka-{{ .Dependencies.kafka }}
          kafka.topic: tweepub_{{ .User.Name }}
          hdfs.externalAddress: hdfs://hdfs-namenode:8020/{{ .User.Name }}
    labels:
      set: # add/modify
        some-test-context-specific-label: some-value
      remove:
        a:
        b:
    dependencies:
      - kafka
      - hdfs
