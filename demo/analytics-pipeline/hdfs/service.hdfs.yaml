# Definition of HDFS service
name: hdfs

components:

  - name: hdfs
    discovery:
      url: "hdfs-namenode-{{ .Discovery.instance }}-0.hdfs-namenode-{{ .Discovery.instance }}"
    code:
      type: aptomi/code/kubernetes-helm
      metadata:
        chartName: hdfs-1.0.0
      params:
        datanode:
          replicas: 1
          image:
            repository: uhopper/hadoop-datanode
            tag: 2.7.2

          antiAffinity: "soft"

        namenode:
          image:
            repository: uhopper/hadoop-namenode
            tag: 2.7.2

          ui:
            service:
              type: NodePort
