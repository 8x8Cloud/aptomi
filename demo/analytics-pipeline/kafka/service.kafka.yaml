# Definition of Kafka service
name: kafka

components:

  - name: zookeeper
    service: zookeeper

  - name: kafka
    code:
      type: aptomi/code/kubernetes-helm
      metadata:
        chartName: kafka-1.0.0
      params:
        replicas: 1
        antiAffinity: "soft"

        image:
          repository: mirantisworkloads/kafka
          tag: 0.10.2.0

        zookeeper:
          deployChart: false
          externalAddress: zk-{{ .Components.zookeeper.zookeeper }}-0.zk-{{ .Components.zookeeper.zookeeper }}:2181

    dependencies:
      - zookeeper
