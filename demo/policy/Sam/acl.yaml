# This rule will make Sam a domain admin
- metadata:
    kind: aclrule
    namespace: system
    name: demo_domain_admins_from_ldap
  criteria:
    require-all:
      - global_ops
  actions:
    change-labels:
      set:
        addrole: domain_admin

# This rule will make Frank, John, and Sam namespace admins
- metadata:
    kind: aclrule
    namespace: system
    name: demo_namespace_admins_from_ldap
  criteria:
    require-all:
      - is_operator
  actions:
    change-labels:
      set:
        addrole: namespace_admin
    namespaces:
      main: true

# This rule will make Alice, Bob, and Carol service consumers
- metadata:
    kind: aclrule
    namespace: system
    name: demo_service_consumers_from_ldap
  criteria:
    require-all:
      - org == 'dev'
  actions:
    change-labels:
      set:
        addrole: service_consumer
    namespaces:
      main: true
